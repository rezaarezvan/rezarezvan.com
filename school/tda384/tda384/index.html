<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Astro v4.11.5"><link rel="icon" type="image" href="/favicon.ico"><title>Part 1 - Introduction</title><!-- KaTeX support --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script><!-- inline KaTeX --><link rel="stylesheet" href="/_astro/index.B_-I1NWR.css">
<link rel="stylesheet" href="/_astro/_slug_.J0rP0O4C.css">
<style>article[data-astro-cid-v5ro3oot]{max-width:80ch;margin:0 auto}.nav-button[data-astro-cid-v5ro3oot]{display:flex;align-items:center;padding:.5rem;border-radius:.5rem;transition:background-color .3s ease;text-decoration:none;color:var(--text-color);background-color:var(--bg-color);border:1px solid var(--border-color)}.nav-button[data-astro-cid-v5ro3oot]:hover{background-color:var(--hover-color)}.nav-button[data-astro-cid-v5ro3oot] .arrow[data-astro-cid-v5ro3oot]{font-size:1.5rem;line-height:1}.nav-button[data-astro-cid-v5ro3oot] .text[data-astro-cid-v5ro3oot]{display:flex;flex-direction:column;margin:0 .5rem}.nav-button[data-astro-cid-v5ro3oot] .label[data-astro-cid-v5ro3oot]{font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;color:var(--muted-color)}.nav-button[data-astro-cid-v5ro3oot] .title[data-astro-cid-v5ro3oot]{font-weight:500}.prev-button[data-astro-cid-v5ro3oot]{justify-content:flex-start}.next-button[data-astro-cid-v5ro3oot]{justify-content:flex-end;text-align:right}@media (max-width: 640px){.nav-button[data-astro-cid-v5ro3oot]{width:100%}.next-button[data-astro-cid-v5ro3oot]{justify-content:flex-start;text-align:left}.next-button[data-astro-cid-v5ro3oot] .text[data-astro-cid-v5ro3oot]{order:2;margin-left:.5rem}.next-button[data-astro-cid-v5ro3oot] .arrow[data-astro-cid-v5ro3oot]{order:1}}
</style><script type="module">document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})});
</script></head> <body> <div class="container mx-auto px-4 flex flex-col md:flex-row min-h-screen"> <aside class="w-full md:w-64 border-b md:border-r md:border-b-0 border-[var(--border-color)] border-dashed pt-8"> <header class="flex flex-col h-full"> <div class="flex items-center mb-4"> <script>
  function setTheme(mode) {
    localStorage.setItem("theme-storage", mode);
    document.documentElement.setAttribute('data-theme', mode);
  }
  function toggleTheme() {
    const currentTheme = localStorage.getItem("theme-storage") || "light";
    const newTheme = currentTheme === "light" ? "dark" : "light";
    setTheme(newTheme);
  }
  const savedTheme = localStorage.getItem("theme-storage") || "light";
  setTheme(savedTheme);
  window.toggleTheme = toggleTheme;
</script> <button id="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme" class="flex items-center justify-center w-6" data-astro-cid-x3pjskd3>○</button>  <a href="/" class="text-2xl font-semibold ml-3 h-10 pr-3">rezvan.xyz</a> </div> <nav class="flex flex-wrap gap-2 md:flex-col md:gap-2"> <a href="/principles" class="hover:text-orange-500 dark:hover:text-orange-400 transition-colors">
[principles]
</a><a href="/cv" class="hover:text-orange-500 dark:hover:text-orange-400 transition-colors">
[cv]
</a><a href="/posts" class="hover:text-orange-500 dark:hover:text-orange-400 transition-colors">
[posts]
</a><a href="/school" class="hover:text-orange-500 dark:hover:text-orange-400 transition-colors">
[school]
</a> </nav> </header> </aside> <main class="flex-grow px-4 md:px-8 py-8 overflow-y-auto">  <article class="prose prose-sm sm:prose lg:prose-lg xl:prose-xl max-w-none" data-astro-cid-v5ro3oot> <h1 class="text-3xl sm:text-4xl font-bold mb-4" data-astro-cid-v5ro3oot>Part 1 - Introduction</h1> <p class="text-sm text-muted-foreground mb-4" data-astro-cid-v5ro3oot>
Date: 1/16/2023 </p> <div class="markdown-content" data-astro-cid-v5ro3oot>  <p>Concurrency, multi-threading, parallelism. These are all big terms thrown around in the computer-science world.
For an outsider it can be quite confusing what these exactly are and how they differ from each other.
In this series we’ll cover and dive into concurrency and its applications.</p>
<p>Let’s start by defining what we mean by concurrency.</p>
<h1 id="introduction">Introduction</h1>
<p>Concurrency, in its very definition is, the fact of two or more events or circumstances happening or existing at the same time.</p>
<p>If we apply this to computer-science, we can see that’s a very natural thing.
Executing two or more events at the same time is something we would love. The only problem is that, we can not guarantee safety.</p>
<p>Let’s look at an example.</p>
<h4 id="simple-example">Simple example</h4>
<p>Let’s look at a Java program which increments a simple counter:</p>
<p>In a sequential (non-concurrent) program this would be:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>public class Counter {</span></span>
<span class="line"><span>    private int counter = 0;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public void run() {</span></span>
<span class="line"><span>        int cnt = counter;</span></span>
<span class="line"><span>        counter = cnt + 1;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public int counter() {</span></span>
<span class="line"><span>        return counter;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>public class SequentialCount {</span></span>
<span class="line"><span>    public static void main(String[] args) {</span></span>
<span class="line"><span>        Counter counter = new Counter();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        counter.run();</span></span>
<span class="line"><span>        counter.run();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        System.out.println(counter.counter());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre>
<p>This program will <strong>always</strong> print out 2. There’s no doubt in that.</p>
<p>If we now introduce concurrency, we will now run these at the same time, or in <em>parallel</em>, do not confuse this with parallelism.
They’re not the same.</p>
<p>So the idea is that we run the block of code we have on <strong>independent</strong> execution units (so-called threads in Java).</p>
<p>Specifically, in Java, these threads will run on the <strong>same</strong> <code>counter</code> object. So they will share the global variable called <code>counter</code>.</p>
<p>We, the programmers, don’t have any control in what order these threads will be executed, this is the <em>schedulers</em> job.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>public class ConcurrentCounter extends Counter implements Runnable {</span></span>
<span class="line"><span>    /*</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    threads will execute run()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    */</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>public class ConcurrentCount {</span></span>
<span class="line"><span>    public static void main(String[] args) {</span></span>
<span class="line"><span>        ConcurrentCounter counter = new ConcurrentCounter();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Thread t = new Thread(counter);</span></span>
<span class="line"><span>        Thread u = new Thread(counter);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        t.start();</span></span>
<span class="line"><span>        u.start();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        try { t.join(); u.join(); }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        catch (InterruptedException e) {</span></span>
<span class="line"><span>            System.out.println("Interrupted!");</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        System.out.println(counter.counter());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre>
<p>If we compile and run this, we necessarily won’t always get the expected answer, 2. In some (rare) cases, we will get the answer 1.</p>
<p>But if there is a risk for failure, why would we even want to write concurrent programs? Well, the answer can be described in three points.</p>
<ul>
<li>Abstraction
<ul>
<li>By separating tasks and making sure we don’t have to worry about them. For example downloading multiple files at once.</li>
</ul>
</li>
<li>Responsiveness
<ul>
<li>We can provide a responsive, user interface by writing concurrent programs. For example, browsing YouTube while downloading files.</li>
</ul>
</li>
<li>Performance
<ul>
<li>Splitting complex tasks, into smaller, subtasks will greatly increase the pure computer performance.</li>
</ul>
</li>
</ul>
<p>Let’s also make one thing clear. Concurrency vs Parallelism. Concurrency is “logical parallelism” and parallelism is “physical parallelism” and parallelism is “physical parallelism”.</p>
<p>Parallelism is about taking advantage of redundant hardware.</p>
<p>Today, concurrency is everywhere, all operating-systems are based on concurrency and making sure things are speedy.</p>
<p>But these speedups aren’t always free.</p>
<h1 id="amdahls-law">Amdahl’s law</h1>
<p>Amdahl’s law gives us an equation that, given $n$ processors (these are not necessarily physical processors but can be execution units) that can run in parallel.</p>
<p>What’s the maximum speedup we can gain?
$$
\text{max speedup} = \frac{1}{(1 - p) + \frac{p}{n}}
$$</p>
<p>$p$ is the % of the program that is being run in parallel. By plugging in some arbitrary values we find quickly that, after a certain threshold, more parallelism doesn’t help.</p>
<h1 id="terminology">Terminology</h1>
<p>Now that we’ve looked at the basics, let’s look at some important terminology.</p>
<p>A process is an <strong>independent unit of execution</strong>. It’s an abstraction of a running sequential program.
This is what the operating system <strong>schedules</strong>, which <strong>process</strong> to run.</p>
<p>The <strong>scheduler</strong> is the system unit that is in charge of the <strong>process state</strong>.
There are 3 states in which a process can be in:</p>
<ul>
<li>Ready
<ul>
<li>Ready to be executed, but not allocated to any execution unit.</li>
</ul>
</li>
<li>Blocked
<ul>
<li>Waiting for an event to happen</li>
</ul>
</li>
<li>Running
<ul>
<li>Running on some execution unit</li>
</ul>
</li>
</ul>
<p>A <strong>thread</strong> is a <em>lightweight process</em>. The actual difference between a process and a thread is fuzzy and implementation specific.</p>
<p>Our definition will be:</p>
<p>Process: Executing units that do <strong>not</strong> share memory.<br>
Threads: Executing units that share memory.</p>
<p>An important thing to remember is that, threads (or execution units that share memory) <strong>communicate</strong> via memory.
While processes (or execution units that do not share memory) send real messages between the processes themselves.</p>
<p>These models are called, <strong>shared memory</strong> and <strong>distributed memory</strong>.</p>
<h1 id="traces">Traces</h1>
<p>A trace is an abstraction of concrete executions, these executions being:</p>
<ul>
<li>Atomic/linearized
<ul>
<li>The effects of each thread appear as if they happened instantaneously.</li>
</ul>
</li>
<li>Complete
<ul>
<li>The trace includes all intermediate atomic states.</li>
</ul>
</li>
<li>Interleaved
<ul>
<li>The trace is an interleaving of each thread’s linear trace (in particular, no simultaneity).</li>
</ul>
</li>
</ul>
<p>What this means is, the sequence of <em>states</em> gives an execution <strong>trace</strong> of the concurrent program.</p>
<p>So different <em>traces</em> lead to different results in the program.</p>
<h1 id="conclusion">Conclusion</h1>
<p>This concludes this first part in this series, we’ve only looked at the pure basics and terminology here.
In the next part we’ll cover races, locks and semaphores, which are the first real concurrency principles we’ll look at.</p>  </div> <nav class="flex flex-col sm:flex-row justify-between mt-8 pt-4 border-t border-border" data-astro-cid-v5ro3oot>  <a href="/school/tda384/tda384_2" class="nav-button next-button" data-astro-cid-v5ro3oot> <span class="text" data-astro-cid-v5ro3oot> <span class="label" data-astro-cid-v5ro3oot>Next</span> <span class="title" data-astro-cid-v5ro3oot>Part 2 - Races, Locks, and Semaphores</span> </span> <span class="arrow" data-astro-cid-v5ro3oot>→</span> </a> </nav> </article>  </main> </div> </body></html> 