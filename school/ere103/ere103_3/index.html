<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>rezvan | Part 3 - Controllers in the Laplace domain</title><link rel=icon type=image/png href=https://rezvan.xyz/images/icon.png><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Introduction In this part we&rsquo;ll define controllers in the Laplace domain.
Let&rsquo;s firstly cover feedback again.
$N$th-Order systems In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$."><meta property="og:image" content="https://raw.githubusercontent.com/rezaarezvan/rezvan.xyz/main/images/icon.png"><meta property="og:url" content="https://rezvan.xyz/school/ere103/ere103_3/"><meta property="og:site_name" content="rezvan"><meta property="og:title" content="Part 3 - Controllers in the Laplace domain"><meta property="og:description" content="Introduction In this part we’ll define controllers in the Laplace domain.
Let’s firstly cover feedback again.
$N$th-Order systems In controls, we’ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let’s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="school"><meta property="article:published_time" content="2023-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-26T11:09:10+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 3 - Controllers in the Laplace domain"><meta name=twitter:description content="Introduction In this part we’ll define controllers in the Laplace domain.
Let’s firstly cover feedback again.
$N$th-Order systems In controls, we’ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let’s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$."><link rel=stylesheet href=https://rezvan.xyz/css/combined.min.285bd67a05674fdcb27bb67f867c7ac6b2e0c0b5535c536ba4bb37cd80e377e9.css integrity="sha256-KFvWegVnT9yye7Z/hnx6xrLgwLVTXFNrpLs3zYDjd+k="><link id=lightSyntaxStyle rel=stylesheet href=https://rezvan.xyz/css/light_syntax.min.d9e0828a4ff7f2d7317942062fc751fa487b2ac2c47b934ad082abd7d3ca6690.css integrity="sha256-2eCCik/38tcxeUIGL8dR+kh7KsLEe5NK0IKr19PKZpA="><link id=darkModeStyle rel=stylesheet href=https://rezvan.xyz/css/dark.min.113ab1177b874ffa2011e31f94df77b25b4c0aee6c35e5db0e6c54ebe2071597.css integrity="sha256-ETqxF3uHT/ogEeMflN93sltMCu5sNeXbDmxU6+IHFZc=" disabled><link id=darkSyntaxStyle rel=stylesheet href=https://rezvan.xyz/css/dark_syntax.min.1a878f3d8fb43359bd3b44bc70c4074f682f11066c6537bf6248b696cbe56586.css integrity="sha256-GoePPY+0M1m9O0S8cMQHT2gvEQZsZTe/Yki2lsvlZYY=" disabled><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body><header><nav id=site-navbar><div class=navbar-content><a href=https://rezvan.xyz/ class=logo>rezvan.xyz</a><div class=navbar-links><a href=/principles class=nav-link><span class=bracket>[</span>principles<span class=bracket>]</span></a>
<a href=/cv class=nav-link><span class=bracket>[</span>cv<span class=bracket>]</span></a>
<a href=/posts class=nav-link><span class=bracket>[</span>posts<span class=bracket>]</span></a>
<a href=/school class=nav-link><span class=bracket>[</span>school<span class=bracket>]</span></a></div><div class=theme-toggle><span id=dark-mode-toggle onclick=toggleTheme() aria-label="Toggle theme">○
</span><script src=https://rezvan.xyz/js/themetoggle.js></script></div></div></nav></header><div class=content><main><article><div class=title><h1>Part 3 - Controllers in the Laplace domain</h1><div class=meta>Posted on Nov 5, 2023</div><div class=meta>(Last updated: May 26, 2024)</div></div><section class=body><h3 id=introduction>Introduction</h3><p>In this part we&rsquo;ll define controllers in the Laplace domain.</p><p>Let&rsquo;s firstly cover feedback again.</p><h3 id=nth-order-systems>$N$th-Order systems</h3><p>In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.</p><p>We also say that the transfer function has degree $N$.</p><h3 id=feedback-system>Feedback system</h3><p>Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$.</p><ul><li>$G(s)$ - System/Process</li><li>$F(s)$ - Controller</li><li>$R(s)$ - Reference value</li><li>$U(s)$ - Input signal</li><li>$Y(s)$ - Output signal</li><li>$E(s)$ - Control error = R(s) - Y(s)</li></ul><p>Let $G_{ry}(s) = \dfrac{Y(s)}{R(s)}$</p><p>$$
Y(s) = G(s) U(s)
$$</p><p>We know that:
$$
U(s) = F(s) E(s)
$$</p><p>$$
E(s) = R(s) - Y(s)
$$</p><p>Therefore:
$$
U(s) = F(s)(R(s) - Y(s))
$$</p><p>$$
U(s) = F(s)R(s) - F(s)Y(s)
$$</p><p>Therefore:
$$
Y(s) = G(s)(F(s)R(s) - F(s)Y(s))
$$</p><p>$$
Y(s) = G(s)F(s)R(s) - G(s)F(s)Y(s)
$$</p><p>$$
Y(s) + G(s)F(s)Y(s) = G(s)F(s)R(s)
$$</p><p>$$
Y(s)(1 + G(s)F(s)) = G(s)F(s)R(s)
$$</p><p>Therefore:
$$
G_{ry}(s) = \dfrac{G(s)F(s)}{1 + G(s)F(s)}
$$</p><p>Let&rsquo;s denote $G(s)F(s)$ as $L(s)$.
$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p><p>This describes the relation between $r(t)$ and $y(t)$ and their stability.</p><h3 id=feedback-system-1>Feedback system</h3><p>Pros:</p><ul><li>$y(t)$ can be equal to $r(t)$ (with the right controller).</li><li>Can compensate for interference</li></ul><p>Cons:</p><ul><li>Can be <strong>unstable</strong></li></ul><h3 id=zeroes-and-poles>Zeroes and poles</h3><p>$G_{ry}(s)$ can be written as:</p><p>$$
G_{ry}(s) = \dfrac{B(s)}{A(s)}
$$</p><p>The zeros are given by the equation $B(s) = 0$.</p><p>The poles are given by the equation $A(s)$.</p><p>We&rsquo;ll see later on how zeros and the poles affect the stability of a system.</p><h3 id=controllers-in-laplace>Controllers in Laplace</h3><ul><li>P-controller - $u(t) = K_p\ e(t)$</li><li>I-controller - $u(t) = K_i\ \int_0^t e(\tau)\ d\tau$</li><li>PI-controller - $u(t) = K_p\ e(t) + K_i \int_0^t e(\tau)\ d\tau$</li></ul><p>In Laplace:</p><ul><li>P-controller - $U(s) = K_p\ E(s)$</li><li>I-controller - $U(s) = K_i\ \dfrac{1}{s}\ E(s)$</li><li>PI-controller - $U(s) = K_p\ E(s) + \dfrac{K_i}{s}\ E(s)$</li></ul><p>Let&rsquo;s rewrite the PI controller a bit:
$$
\begin{align*}
U(s) & = K_p\ E(s) + \dfrac{K_i}{s}\ E(s) \\
& = E(s) \left(K_p + \dfrac{K_i}{s}\right) \\
& = E(s) \left(K_p\left(1 + \dfrac{K_i}{K_p} + \dfrac{1}{s}\right)\right) \\
& = E(s) \left(K_p\left(1 + \dfrac{1}{T_i \cdot s}\right)\right) \\
& = E(s) \left(K_p \cdot \dfrac{1 + T_i \cdot s}{T_i \cdot s} \right)
\end{align*}
$$</p><p>Where $T_i = \dfrac{K_p}{K_i}$</p><h3 id=car-example-v2>Car example v2</h3><p>Let&rsquo;s add some engine dynamics:</p><p>$$
F_d(s) = \dfrac{K_u}{1 + T_u \cdot S} \cdot U(s)
$$</p><p>Car dynamic:
$$
G_{car}(s) = \dfrac{K}{1 + sT} = \dfrac{1}{ms + b}
$$</p><p>From the differential equation (just like last time) we get:
$$
Y(s)(ms + b) = \dfrac{K_u}{1 + T_u \cdot s} \cdot U(s)
$$</p><p>Let&rsquo;s find transfer function from $U(s) \to Y(s)$.</p><p>$$
G_{uy}(s) = \dfrac{Y(s)}{U(s)}
$$</p><p>$$
G_{uy}(s) = \dfrac{K_u}{(ms + b)(1 + T_u\ s)}
$$</p><p>Given some values:</p><ul><li>$m = 10^3\ kg$</li><li>$b = 200\ \dfrac{Ns}{m}$</li><li>$K_u = 10k\ \dfrac{N}{rad}$</li><li>$T_u = 1\ sec$</li></ul><p>$$
G_{uy}(s) = \dfrac{10^3}{(10^3s + 200)(1 + s)} = \ldots = \boxed{\dfrac{50}{(1 + 5s)(1 + s)}}
$$</p><h3 id=p-controller>P-controller</h3><p>Say that our controller was a P-controller.</p><p>Let&rsquo;s find $G_{ry}(s)$.</p><p>$L(s) = K_p \cdot G_{uy}(s)$</p><p>$$
L(s) = \dfrac{50K_p}{(1 + 5s)(1 +s)}
$$</p><p>$$
G_{ry}(s) = \dfrac{\dfrac{50K_p}{(1 + 5s)(1 +s)}}{1 + \dfrac{50K_p}{(1 + 5s)(1 +s)}}
$$</p><p>$$
G_{ry}(s) = \dfrac{50K_p}{(1 + 5s)(1 + s) + 50K_p}
$$</p><p>$$
G_{ry}(s) = \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10K_p}
$$</p><h3 id=gradually-increasing-reference-value>Gradually increasing reference value</h3><p>Say that we have $r(t) = r_0 \cdot \sigma(t)$</p><p>This means:
$$
R(s) = \dfrac{r_0}{s}
$$</p><p>Let&rsquo;s study $y(\infty)$.</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} sY(s)
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot G_{ry}(s) \cdot R(s)
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10K_p} \cdot \dfrac{r_0}{s}
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10K_p}{\dfrac{1}{5} + 10K_p} \cdot r_0
$$</p><p>Thus
$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10K_p}{\dfrac{1}{5} + 10K_p} \cdot r_0 &lt; r_0
$$</p><p>This means that, a P-controller will never be enough for a system to get an output that is exactly the same as the reference value.</p><p>Let&rsquo;s see how a PI-controller behaves.</p><h3 id=example-pi-controller>Example PI-controller</h3><p>If we use the same system.</p><p>$G_{ry}(s)$ is a 2nd order transfer function. (The denominator is a polynomial of degree 2).</p><p>The general formula for 2nd order transfer functions can be written as:
$$
G_{ry}(s) = \dfrac{K \omega^2_n}{s^2 + 2 \zeta \omega_n s + \omega^2_n}
$$</p><p>Where:</p><ul><li>$\omega_n$ - Natural frequency</li><li>$K$- Gain</li><li>$\zeta$ - Damping ratio</li></ul><p>So, in the case $G_{ry}(s) = \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10 K_p}$</p><p>We can rewrite it with:
$$
\omega_n = \sqrt{0.2 + 10 K_p} \\
K = \dfrac{10K_p}{0.2 + 10 K_p} \\
\zeta = \dfrac{1.2}{2\ \sqrt{0.2 + 10 K_p}}
$$</p><p>Back to the PI-controller example.</p><p>$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p><p>We know that:
$$
L(s) = F(s) G(s)
$$</p><p>We know:
$$
F(s) = K_p \left(\dfrac{1 + T_i s}{T_i s} \right) \\
G(s) = \dfrac{50}{(1 + 5s)(1 + s)}
$$</p><p>From $G(s)$ we can see that we have two poles. One pole is &ldquo;fast&rdquo;, $T = 1\ sec$ $(1 + s)$. The other &ldquo;slow&rdquo;, $T = 5\ sec$ $(1 + 5s)$.</p><p>If we choose $T_i = 5\ sec$, then:
$$
F(s) = K_p \left(\dfrac{1 + 5s}{5s} \right) \\
$$</p><p>Which means:
$$
L(s) = K_p \left(\dfrac{1 + 5s}{5s} \right) \dfrac{50}{(1 + 5s)(1 + s)}
$$</p><p>$$
L(s) = \dfrac{50 K_p}{(5s)(1 + s)}
$$</p><p>Which means:
$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p><p>$$
G_{ry}(s) = \dfrac{\dfrac{50 K_p}{(5s)(1 + s)}}{1 + \dfrac{50 K_p}{(5s)(1 + s)}}
$$</p><p>$$
G_{ry}(s) = \dfrac{50 K_p}{(5s)(1 + s) + 50 K_p}
$$</p><p>$$
G_{ry}(s) = \dfrac{10 K_p}{s^2 + s + 10 K_p}
$$</p><p>If we now study:
$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot Y(s)
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot G_{ry}(s) R(s)
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot \dfrac{10 K_p}{s^2 + s + 10 K_p} \cdot \dfrac{r_0}{s}
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10 K_p}{s^2 + s + 10 K_p} \cdot r_0
$$</p><p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10 K_p}{10 K_p} \cdot r_0
$$</p><p>$$
\boxed{\lim_{t \to \infty} y(t) = r_0}
$$</p><p>So, we see that a PI-controller gets us exactly the reference value.</p></section></article><nav class=navigation><div class="nav-item previous"><a href=/school/ere103/ere103_2/ title="Previous: Part 2 - Transfer functions">&larr; Previous</a></div><div class="nav-item next"><a href=/school/ere103/ere103_4/ title="Next: Part 4 - Models for mechanical systems">Next &rarr;</a></div></nav></main></div><footer id=site-footer><div class=social-links><a href=https://github.com/rezaarezvan title class=social-link><span class=bracket>[</span>github<span class=bracket>]</span></a>
<a href=https://x.com/rzvan__/ title class=social-link><span class=bracket>[</span>x<span class=bracket>]</span></a></div><div class=footer-marquee><div class=footer-marquee__content><span class=footer-marquee__item>memento mori • amor fati • sic parvis magna • per aspera ad astra</span>
<span class=footer-marquee__item>memento mori • amor fati • sic parvis magna • per aspera ad astra</span></div></div></footer></body></html>