<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"><meta property="og:site_name" content="rezvan"><title>Digital Design: Part 7 - Timing, delay &amp; power | rezvan</title>
  <meta property="og:title" content="Digital Design: Part 7 - Timing, delay &amp; power | rezvan"><meta property="og:description" content="">
  <meta property="og:type" content="blog">
  <meta property="og:link" content="https://rezvan.xyz/school/digital_design_7/"><link rel="shortcut icon" type="image/png" href=https://rezvan.xyz//images/icon.png />
  <meta property="og:image" content="https://rezvan.xyz//images/icon.png" /><meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" media="screen" href="https://rezvan.xyz//css/main.css" />    
</head>

<body>
  <div class="wrapper">
	<div class="content">
		<div class="header_main">
	<a href="https://rezvan.xyz/"><p class="header_title">rezvan</p><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css" integrity="sha384-Juol1FqnotbkyZUT5Z7gUPjQ9gzlwCENvUZTpQBAPxtusdwFLRy382PSDx5UUJ4/" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js" integrity="sha384-97gW6UIJxnlKemYavrqDHSX3SiygeOwIZhwyOKRfSaf0JWKRVj9hLASHgFTzT+0O" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

	</a>
  <br>
  <nav id="main">
    
      <a href="/About/">About</a>
    
      <a href="/CV/">CV</a>
    
      <a href="/school/">School</a>
    
  </nav></div>

  <article><div class="title_wrapper">
			<h1 class="title">Digital Design: Part 7 - Timing, delay &amp; power</h1><p class="single_time">Feb 8, 2023</p></div>
		<section class="post">
			<p>When designing digital circuits, the timing, delay and power usage of the circuit are important.
In this part we&rsquo;ll cover how we usually measure and compare these.</p>
<h3 id="timing-and-delay">Timing and delay</h3>
<p>In an arbitrary synchronous circuit, we usually have:</p>
<ul>
<li>
<p>A single-bit clock, all other wires may be multiple bits wide.</p>
</li>
<li>
<p>Registers (Which is just a collection of flip-flops).</p>
</li>
<li>
<p>The clock will be distributed to all flip-flops</p>
</li>
<li>
<p>Combinational logic</p>
<ul>
<li>
<p>No internal state</p>
</li>
<li>
<p>Output only a function of input(s)</p>
</li>
</ul>
</li>
<li>
<p>Particular inputs/outputs are optional</p>
</li>
<li>
<p>Optional feedback(-loops).</p>
</li>
</ul>
<p>So how do we measure the performance/how fast a circuit is? We could do,
operations/sec, or cycles/sec? But we need to know what limits the clock rate and what happens if we increase the clock rate.</p>
<p>If we break this down, what causes delay?</p>
<ul>
<li>
<p>Logic gate delay</p>
</li>
<li>
<p>(Physical) Wire delay</p>
</li>
<li>
<p>Delays in flip-flops</p>
</li>
</ul>
<p>Only one of these delays can cause a faulty cycle. Since flip-flops require a setup time and a clock to Q delay.
We can have situations where, if the clock is too fast, the flip-flops outputs the wrong things.</p>
<p>When analysing circuits, we only care about the critical path - if the clock is too fast for this path, the whole circuit falls.</p>
<p>There are 4 general cases:</p>
<ul>
<li>
<p>Input -&gt; CL -&gt; Output</p>
</li>
<li>
<p>Input -&gt; CL -&gt; Register</p>
</li>
<li>
<p>Register -&gt; CL -&gt; Output</p>
</li>
<li>
<p>Register -&gt; CL -&gt; Register</p>
</li>
</ul>
<p>Therefore, in general the clock period, $T$, should be:</p>
<p>T &gt; time(input setup) + time(CL) + time(wire) + time(output setup)</p>
<h3 id="gate-delay">Gate delay</h3>
<p>The time needed for the output of a gate to change from the moment an input of the gate changes depends on:</p>
<ul>
<li>
<p>Transistor parameters</p>
</li>
<li>
<p>Fan-out: how many wires it will drive</p>
</li>
<li>
<p>Fan-in: number of inputs of a gate</p>
</li>
</ul>
<h3 id="wire-delay">Wire Delay</h3>
<p>In general, wires behave as the transmission lines,
signal wave-front moves close to the speed of light.</p>
<p>Wire delay is also proportional to the square of its length, $\mathcal{O}(LÂ²)$</p>
<h3 id="flip-flop-delay">Flip-flop delay</h3>
<p>As we earlier covered, flip-flops have a certain delay.</p>
<p>These are:</p>
<ul>
<li>
<p>Setup time</p>
<ul>
<li>The time the input of a flip-flop needs to be stable,
before the clock edge to be stored correctly</li>
</ul>
</li>
<li>
<p>Hold time</p>
<ul>
<li>The time the input of a flip-flop needs to be held,
after the clock edge to be stored correctly</li>
</ul>
</li>
<li>
<p>Propagation time</p>
<ul>
<li>The time a flip-flop needs to propagate a value stored to the output</li>
</ul>
</li>
</ul>
<h3 id="metastability">Metastability</h3>
<p>Asynchronous inputs can be really dangerous, therefore synchronous inputs are preferred.</p>
<p>The solution to this is having a so-called <strong>synchronizer</strong> blocks (usually two registers).</p>
<p>A synchronizer design is characterised by its <strong>M</strong>ean <strong>T</strong>ime <strong>B</strong>etween <strong>F</strong>ailure (MTBF).</p>
<p>There is a nice equation:
$$
MTBF(t_r) = \frac{e^{\frac{t_r}{\tau}}}{T_0 \cdot\ f \cdot\ a}
$$</p>
<p>Where:
$$
t_r = \text{resolution time (clock period - FF setup time)} \newline
T_0, \tau = \text{flip-flop characteristic constants} \newline
f = \text{clock frequency} \newline
a = \text{average input rate of change}
$$</p>
<h3 id="power">Power</h3>
<p>Time for a bit of math and physics:)</p>
<p>The power supply provides energy for charging and discharging wires and transistor gates.
The energy is stored and dissipated as heat.</p>
<p>Let&rsquo;s remember that:
$$
P = \frac{dE}{dt}
$$</p>
<p>And that, voltage (potential of the charge) is increased the amount of energy,
$dE$, needed to move an amount of charge, $dq$.</p>
<p>$$
V = \frac{dE}{dq}
$$</p>
<p>And <em>current</em> is:
$$
I = \frac{dq}{dt}
$$</p>
<p>Then:
$$
\frac{dE}{dt} = \frac{dE}{dq} \cdot\ \frac{dq}{dt} = \boxed{P = V \cdot\ I}
$$</p>
<p>Which means:
$$
E = \int_{-\infty}^t\ P\ dt
$$</p>
<p>Remember that power and energy is not the same in the physics world,
even if we may use them interchangeably in every-day terms.</p>
<h3 id="metrics">Metrics</h3>
<p>These are some of the metrics that we usually study in digital circuits</p>
<p>Average power:
$$
P_{avg} = \frac{\Delta E}{\Delta t}
$$</p>
<p>Peak power:
$$
P_{peak} = max(\lim_{\Delta t \rightarrow 0}\ \frac{\Delta E}{\Delta T}) = max(\frac{dE}{dt})
$$</p>
<p>One of the most popular metrics is <strong>performance per watt</strong> (measures energy efficiency).</p>

		</section>
  </article>
	</div>

	<footer><p class="footer_msg">Memento mori</p></footer>

  </div>
</body>
</html>
