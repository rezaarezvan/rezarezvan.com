<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><title>rezvan | Control theory: Part 3 - Controllers in the Laplace domain</title><link rel="icon" type="image/png" href="http://localhost:1313/images/icon.png" /><meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Introduction In this part we&rsquo;ll define controllers in the Laplace domain.
Let&rsquo;s firstly cover feedback again.
$N$th-Order systems In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$." />
    <meta property="og:image" content="https://raw.githubusercontent.com/rezaarezvan/rezvan.xyz/main/images/icon.png" />
    <meta property="og:title" content="Control theory: Part 3 - Controllers in the Laplace domain" />
<meta property="og:description" content="Introduction In this part we&rsquo;ll define controllers in the Laplace domain.
Let&rsquo;s firstly cover feedback again.
$N$th-Order systems In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/school/ERE103/ERE103_3/" /><meta property="article:section" content="school" />
<meta property="article:published_time" content="2023-11-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-11-05T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Control theory: Part 3 - Controllers in the Laplace domain"/>
<meta name="twitter:description" content="Introduction In this part we&rsquo;ll define controllers in the Laplace domain.
Let&rsquo;s firstly cover feedback again.
$N$th-Order systems In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.
We also say that the transfer function has degree $N$.
Feedback system Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$."/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

    
    
    <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.f21696f99283540e6a453bb6dbca948ad3a30656fa420a23835a6a2bc9dee469.css" />
    <link id="lightSyntaxStyle" rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/light_syntax.65408cc3a5c02070b661c3e4e79306fc261cc63620f4adce9a30eafcba4ab79e.css" />
    
    <link id="darkModeStyle" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.f21f1f72304fd4373b0a82b421dac836220c43b1e924ed3811cbe84f5c8a1b3f.css"  disabled />
    <link id="darkSyntaxStyle" rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/dark_syntax.2b10cc1a2156b30874a063b7439a993bc3b43d476c5e1d8598d769c929c7b381.css" />
    

    
    
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>

    
    <script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
    

    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>

    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
        });
    </script>
    

    
</head>
<body>
    <div class="content"><header>
    <nav id="site-navbar">
        
        <a href="/">home</a>
        
        <a href="/about">about</a>
        
        <a href="/principles">principles</a>
        
        <a href="/contact">contact</a>
        
        <a href="/cv">cv</a>
        
        <a href="/school">school</a>
        
        | <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
        <script src="http://localhost:1313/js/themetoggle.js"></script>
        
    </nav>
</header>

<main>
    <article>
        <div class="title">
            <h1 class="title">Control theory: Part 3 - Controllers in the Laplace domain</h1>
            <div class="meta">Posted on Nov 5, 2023</div>
        </div>
        

        <section class="body">
            <h3 id="introduction">Introduction</h3>
<p>In this part we&rsquo;ll define controllers in the Laplace domain.</p>
<p>Let&rsquo;s firstly cover feedback again.</p>
<h3 id="nth-order-systems">$N$th-Order systems</h3>
<p>In controls, we&rsquo;ll often study system which can be described with differential equations. A $N$th-order system means we can describe said system with a $N$th-order differential equation.</p>
<p>We also say that the transfer function has degree $N$.</p>
<h3 id="feedback-system">Feedback system</h3>
<p>Let&rsquo;s find the general transfer function for a feedback system, from $r(t)$ to $y(t)$.</p>
<ul>
<li>$G(s)$ - System/Process</li>
<li>$F(s)$ - Controller</li>
<li>$R(s)$ - Reference value</li>
<li>$U(s)$ - Input signal</li>
<li>$Y(s)$ - Output signal</li>
<li>$E(s)$ - Control error = R(s) - Y(s)</li>
</ul>
<p>Let $G_{ry}(s) = \dfrac{Y(s)}{R(s)}$</p>
<p>$$
Y(s) = G(s) U(s)
$$</p>
<p>We know that:
$$
U(s) = F(s) E(s)
$$</p>
<p>$$
E(s) = R(s) - Y(s)
$$</p>
<p>Therefore:
$$
U(s) = F(s)(R(s) - Y(s))
$$</p>
<p>$$
U(s) = F(s)R(s) - F(s)Y(s)
$$</p>
<p>Therefore:
$$
Y(s) = G(s)(F(s)R(s) - F(s)Y(s))
$$</p>
<p>$$
Y(s) = G(s)F(s)R(s) - G(s)F(s)Y(s)
$$</p>
<p>$$
Y(s) + G(s)F(s)Y(s) = G(s)F(s)R(s)
$$</p>
<p>$$
Y(s)(1 + G(s)F(s)) = G(s)F(s)R(s)
$$</p>
<p>Therefore:
$$
G_{ry}(s) = \dfrac{G(s)F(s)}{1 + G(s)F(s)}
$$</p>
<p>Let&rsquo;s denote $G(s)F(s)$ as $L(s)$.
$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p>
<p>This describes the relation between $r(t)$ and $y(t)$ and their stability.</p>
<h3 id="feedback-system-1">Feedback system</h3>
<p>Pros:</p>
<ul>
<li>$y(t)$ can be equal to $r(t)$ (with the right controller).</li>
<li>Can compensate for interference</li>
</ul>
<p>Cons:</p>
<ul>
<li>Can be <strong>unstable</strong></li>
</ul>
<h3 id="zeroes-and-poles">Zeroes and poles</h3>
<p>$G_{ry}(s)$ can be written as:</p>
<p>$$
G_{ry}(s) = \dfrac{B(s)}{A(s)}
$$</p>
<p>The zeros are given by the equation $B(s) = 0$.</p>
<p>The poles are given by the equation $A(s)$.</p>
<p>We&rsquo;ll see later on how zeros and the poles affect the stability of a system.</p>
<h3 id="controllers-in-laplace">Controllers in Laplace</h3>
<ul>
<li>P-controller - $u(t) = K_p\ e(t)$</li>
<li>I-controller - $u(t) = K_i\ \int_0^t e(\tau)\ d\tau$</li>
<li>PI-controller - $u(t) = K_p\ e(t) + K_i \int_0^t e(\tau)\ d\tau$</li>
</ul>
<p>In Laplace:</p>
<ul>
<li>P-controller - $U(s) = K_p\ E(s)$</li>
<li>I-controller - $U(s) = K_i\ \dfrac{1}{s}\ E(s)$</li>
<li>PI-controller - $U(s) = K_p\ E(s) + \dfrac{K_i}{s}\ E(s)$</li>
</ul>
<p>Let&rsquo;s rewrite the PI controller a bit:
$$
\begin{align*}
U(s) &amp; = K_p\ E(s) + \dfrac{K_i}{s}\ E(s) \\
&amp; = E(s) \left(K_p + \dfrac{K_i}{s}\right) \\
&amp; = E(s) \left(K_p\left(1 + \dfrac{K_i}{K_p} + \dfrac{1}{s}\right)\right) \\
&amp; = E(s) \left(K_p\left(1 + \dfrac{1}{T_i \cdot s}\right)\right) \\
&amp; = E(s) \left(K_p \cdot \dfrac{1 + T_i \cdot s}{T_i \cdot s} \right)
\end{align*}
$$</p>
<p>Where $T_i = \dfrac{K_p}{K_i}$</p>
<h3 id="car-example-v2">Car example v2</h3>
<p>Let&rsquo;s add some engine dynamics:</p>
<p>$$
F_d(s) = \dfrac{K_u}{1 + T_u \cdot S} \cdot U(s)
$$</p>
<p>Car dynamic:
$$
G_{car}(s) = \dfrac{K}{1 + sT} = \dfrac{1}{ms + b}
$$</p>
<p>From the differential equation (just like last time) we get:
$$
Y(s)(ms + b) = \dfrac{K_u}{1 + T_u \cdot s} \cdot U(s)
$$</p>
<p>Let&rsquo;s find transfer function from $U(s) \to Y(s)$.</p>
<p>$$
G_{uy}(s) = \dfrac{Y(s)}{U(s)}
$$</p>
<p>$$
G_{uy}(s) = \dfrac{K_u}{(ms + b)(1 + T_u\ s)}
$$</p>
<p>Given some values:</p>
<ul>
<li>$m = 10^3\ kg$</li>
<li>$b = 200\ \dfrac{Ns}{m}$</li>
<li>$K_u = 10k\ \dfrac{N}{rad}$</li>
<li>$T_u = 1\ sec$</li>
</ul>
<p>$$
G_{uy}(s) = \dfrac{10^3}{(10^3s + 200)(1 + s)} = \ldots = \boxed{\dfrac{50}{(1 + 5s)(1 + s)}}
$$</p>
<h3 id="p-controller">P-controller</h3>
<p>Say that our controller was a P-controller.</p>
<p>Let&rsquo;s find $G_{ry}(s)$.</p>
<p>$L(s) = K_p \cdot G_{uy}(s)$</p>
<p>$$
L(s) = \dfrac{50K_p}{(1 + 5s)(1 +s)}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{\dfrac{50K_p}{(1 + 5s)(1 +s)}}{1 + \dfrac{50K_p}{(1 + 5s)(1 +s)}}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{50K_p}{(1 + 5s)(1 + s) + 50K_p}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10K_p}
$$</p>
<h3 id="gradually-increasing-reference-value">Gradually increasing reference value</h3>
<p>Say that we have $r(t) = r_0 \cdot \sigma(t)$</p>
<p>This means:
$$
R(s) = \dfrac{r_0}{s}
$$</p>
<p>Let&rsquo;s study $y(\infty)$.</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} sY(s)
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot G_{ry}(s) \cdot R(s)
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10K_p} \cdot \dfrac{r_0}{s}
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10K_p}{\dfrac{1}{5} + 10K_p} \cdot r_0
$$</p>
<p>Thus
$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10K_p}{\dfrac{1}{5} + 10K_p} \cdot r_0 &lt; r_0
$$</p>
<p>This means that, a P-controller will never be enough for a system to get an output that is exactly the same as the reference value.</p>
<p>Let&rsquo;s see how a PI-controller behaves.</p>
<h3 id="example-pi-controller">Example PI-controller</h3>
<p>If we use the same system.</p>
<p>$G_{ry}(s)$ is a 2nd order transfer function. (The denominator is a polynomial of degree 2).</p>
<p>The general formula for 2nd order transfer functions can be written as:
$$
G_{ry}(s) = \dfrac{K \omega^2_n}{s^2 + 2 \zeta \omega_n s + \omega^2_n}
$$</p>
<p>Where:</p>
<ul>
<li>$\omega_n$ - Natural frequency</li>
<li>$K$- Gain</li>
<li>$\zeta$ - Damping ratio</li>
</ul>
<p>So, in the case $G_{ry}(s) = \dfrac{10K_p}{s^2 + \dfrac{6}{5}s + \dfrac{1}{5} + 10 K_p}$</p>
<p>We can rewrite it with:
$$
\omega_n = \sqrt{0.2 + 10 K_p} \\
K = \dfrac{10K_p}{0.2 + 10 K_p} \\
\zeta = \dfrac{1.2}{2\ \sqrt{0.2 + 10 K_p}}
$$</p>
<p>Back to the PI-controller example.</p>
<p>$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p>
<p>We know that:
$$
L(s) = F(s) G(s)
$$</p>
<p>We know:
$$
F(s) = K_p \left(\dfrac{1 + T_i s}{T_i s} \right) \\
G(s) = \dfrac{50}{(1 + 5s)(1 + s)}
$$</p>
<p>From $G(s)$ we can see that we have two poles. One pole is &ldquo;fast&rdquo;, $T = 1\ sec$ $(1 + s)$. The other &ldquo;slow&rdquo;, $T = 5\ sec$ $(1 + 5s)$.</p>
<p>If we choose $T_i = 5\ sec$, then:
$$
F(s) = K_p \left(\dfrac{1 + 5s}{5s} \right) \\
$$</p>
<p>Which means:
$$
L(s) = K_p \left(\dfrac{1 + 5s}{5s} \right) \dfrac{50}{(1 + 5s)(1 + s)}
$$</p>
<p>$$
L(s) = \dfrac{50 K_p}{(5s)(1 + s)}
$$</p>
<p>Which means:
$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{\dfrac{50 K_p}{(5s)(1 + s)}}{1 + \dfrac{50 K_p}{(5s)(1 + s)}}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{50 K_p}{(5s)(1 + s) + 50 K_p}
$$</p>
<p>$$
G_{ry}(s) = \dfrac{10 K_p}{s^2 + s + 10 K_p}
$$</p>
<p>If we now study:
$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot Y(s)
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot G_{ry}(s) R(s)
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} s \cdot \dfrac{10 K_p}{s^2 + s + 10 K_p} \cdot \dfrac{r_0}{s}
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10 K_p}{s^2 + s + 10 K_p} \cdot r_0
$$</p>
<p>$$
\lim_{t \to \infty} y(t) = \lim_{s \to 0} \dfrac{10 K_p}{10 K_p} \cdot r_0
$$</p>
<p>$$
\boxed{\lim_{t \to \infty} y(t) = r_0}
$$</p>
<p>So, we see that a PI-controller gets us exactly the reference value.</p>

        </section>

        <div class="post-tags">
            
            
            <nav class="nav tags">
                <ul class="tags">
                    
                    
                    

                    
                </ul>
            </nav>
            
            
        </div>
    </article>
</main>
<footer id="site-footer">
    
    <a href="https://github.com/rezaarezvan" title="">github</a>
    
    <a href="https://x.com/rzvan__/" title="">x</a>
    <p class="footer_msg">memento mori</p></footer><script>
    feather.replace()
</script></div>
</body>

</html>
