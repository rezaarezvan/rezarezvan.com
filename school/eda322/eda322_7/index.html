<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>rezvan | Part 7 - Timing, delay & power</title><link rel=icon type=image/png href=https://rezvan.xyz/images/icon.png><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="When designing digital circuits, the timing, delay and power usage of the circuit are important. In this part we&rsquo;ll cover how we usually measure and compare these.
Timing and delay In an arbitrary synchronous circuit, we usually have:
A single-bit clock, all other wires may be multiple bits wide. Registers (Which is just a collection of flip-flops). The clock will be distributed to all flip-flops Combinational logic No internal state Output only a function of input(s) Particular inputs/outputs are optional Optional feedback(-loops)."><meta property="og:image" content="https://raw.githubusercontent.com/rezaarezvan/rezvan.xyz/main/images/icon.png"><meta property="og:url" content="https://rezvan.xyz/school/eda322/eda322_7/"><meta property="og:site_name" content="rezvan"><meta property="og:title" content="Part 7 - Timing, delay & power"><meta property="og:description" content="When designing digital circuits, the timing, delay and power usage of the circuit are important. In this part we’ll cover how we usually measure and compare these.
Timing and delay In an arbitrary synchronous circuit, we usually have:
A single-bit clock, all other wires may be multiple bits wide. Registers (Which is just a collection of flip-flops). The clock will be distributed to all flip-flops Combinational logic No internal state Output only a function of input(s) Particular inputs/outputs are optional Optional feedback(-loops)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="school"><meta property="article:published_time" content="2023-02-08T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-26T11:09:10+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 7 - Timing, delay & power"><meta name=twitter:description content="When designing digital circuits, the timing, delay and power usage of the circuit are important. In this part we’ll cover how we usually measure and compare these.
Timing and delay In an arbitrary synchronous circuit, we usually have:
A single-bit clock, all other wires may be multiple bits wide. Registers (Which is just a collection of flip-flops). The clock will be distributed to all flip-flops Combinational logic No internal state Output only a function of input(s) Particular inputs/outputs are optional Optional feedback(-loops)."><link rel=stylesheet href=https://rezvan.xyz/css/combined.min.285bd67a05674fdcb27bb67f867c7ac6b2e0c0b5535c536ba4bb37cd80e377e9.css integrity="sha256-KFvWegVnT9yye7Z/hnx6xrLgwLVTXFNrpLs3zYDjd+k="><link id=lightSyntaxStyle rel=stylesheet href=https://rezvan.xyz/css/light_syntax.min.d9e0828a4ff7f2d7317942062fc751fa487b2ac2c47b934ad082abd7d3ca6690.css integrity="sha256-2eCCik/38tcxeUIGL8dR+kh7KsLEe5NK0IKr19PKZpA="><link id=darkModeStyle rel=stylesheet href=https://rezvan.xyz/css/dark.min.113ab1177b874ffa2011e31f94df77b25b4c0aee6c35e5db0e6c54ebe2071597.css integrity="sha256-ETqxF3uHT/ogEeMflN93sltMCu5sNeXbDmxU6+IHFZc=" disabled><link id=darkSyntaxStyle rel=stylesheet href=https://rezvan.xyz/css/dark_syntax.min.1a878f3d8fb43359bd3b44bc70c4074f682f11066c6537bf6248b696cbe56586.css integrity="sha256-GoePPY+0M1m9O0S8cMQHT2gvEQZsZTe/Yki2lsvlZYY=" disabled><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body><header><nav id=site-navbar><div class=navbar-content><a href=https://rezvan.xyz/ class=logo>rezvan.xyz</a><div class=navbar-links><a href=/principles class=nav-link><span class=bracket>[</span>principles<span class=bracket>]</span></a>
<a href=/cv class=nav-link><span class=bracket>[</span>cv<span class=bracket>]</span></a>
<a href=/posts class=nav-link><span class=bracket>[</span>posts<span class=bracket>]</span></a>
<a href=/school class=nav-link><span class=bracket>[</span>school<span class=bracket>]</span></a></div><div class=theme-toggle><span id=dark-mode-toggle onclick=toggleTheme() aria-label="Toggle theme">○
</span><script src=https://rezvan.xyz/js/themetoggle.js></script></div></div></nav></header><div class=content><main><article><div class=title><h1>Part 7 - Timing, delay & power</h1><div class=meta>Posted on Feb 8, 2023</div><div class=meta>(Last updated: May 26, 2024)</div></div><section class=body><p>When designing digital circuits, the timing, delay and power usage of the circuit are important.
In this part we&rsquo;ll cover how we usually measure and compare these.</p><h3 id=timing-and-delay>Timing and delay</h3><p>In an arbitrary synchronous circuit, we usually have:</p><ul><li>A single-bit clock, all other wires may be multiple bits wide.</li><li>Registers (Which is just a collection of flip-flops).</li><li>The clock will be distributed to all flip-flops</li><li>Combinational logic<ul><li>No internal state</li><li>Output only a function of input(s)</li></ul></li><li>Particular inputs/outputs are optional</li><li>Optional feedback(-loops).</li></ul><p>So how do we measure the performance/how fast a circuit is? We could do,
operations/sec, or cycles/sec? But we need to know what limits the clock rate and what happens if we increase the clock rate.</p><p>If we break this down, what causes delay?</p><ul><li>Logic gate delay</li><li>(Physical) Wire delay</li><li>Delays in flip-flops</li></ul><p>Only one of these delays can cause a faulty cycle. Since flip-flops require a setup time and a clock to Q delay.
We can have situations where, if the clock is too fast, the flip-flops output the wrong things.</p><p>When analyzing circuits, we only care about the critical path - if the clock is too fast for this path, the whole circuit falls.</p><p>There are 4 general cases:</p><ul><li>Input $\to$ CL $\to$ Output</li><li>Input $\to$ CL $\to$ Register</li><li>Register $\to$ CL $\to$ Output</li><li>Register $\to$ CL $\to$ Register</li></ul><p>Therefore, in general the clock period, $T$, should be:</p><p>T = time(input setup) + time(CL) + time(wire) + time(output setup)</p><h3 id=gate-delay>Gate delay</h3><p>The time needed for the output of a gate to change from the moment an input of the gate changes depends on:</p><ul><li>Transistor parameters</li><li>Fan-out: how many wires it will drive</li><li>Fan-in: number of inputs of a gate</li></ul><h3 id=wire-delay>Wire Delay</h3><p>In general, wires behave as the transmission lines,
signal wave-front moves close to the speed of light.</p><p>Wire delay is also proportional to the square of its length, $\mathcal{O}(L²)$</p><h3 id=flip-flop-delay>Flip-flop delay</h3><p>As we earlier covered, flip-flops have a certain delay.</p><p>These are:</p><ul><li>Setup time<ul><li>The time the input of a flip-flop needs to be stable,
before the clock edge to be stored correctly</li></ul></li><li>Hold time<ul><li>The time the input of a flip-flop needs to be held,
after the clock edge to be stored correctly</li></ul></li><li>Propagation time<ul><li>The time a flip-flop needs to propagate a value stored to the output</li></ul></li></ul><h3 id=metastability>Metastability</h3><p>Asynchronous inputs can be really dangerous, therefore synchronous inputs are preferred.</p><p>The solution to this is having a so-called <strong>synchronizer</strong> blocks (usually two registers).</p><p>A synchronizer design is characterised by its <strong>M</strong>ean <strong>T</strong>ime <strong>B</strong>etween <strong>F</strong>ailure (MTBF).</p><p>There is a nice equation:
$$
MTBF(t_r) = \frac{e^{\frac{t_r}{\tau}}}{T_0 \cdot\ f \cdot\ a}
$$</p><p>Where:
$$
t_r = \text{resolution time (clock period - FF setup time)} \newline
T_0, \tau = \text{flip-flop characteristic constants} \newline
f = \text{clock frequency} \newline
a = \text{average input rate of change}
$$</p><h3 id=power>Power</h3><p>Time for a bit of math and physics:)</p><p>The power supply provides energy for charging and discharging wires and transistor gates.
The energy is stored and dissipated as heat.</p><p>Let&rsquo;s remember that:
$$
P = \frac{dE}{dt}
$$</p><p>And that, voltage (potential of the charge) is increased the amount of energy,
$dE$, needed to move an amount of charge, $dq$.</p><p>$$
V = \frac{dE}{dq}
$$</p><p>And <em>current</em> is:
$$
I = \frac{dq}{dt}
$$</p><p>Then:
$$
\frac{dE}{dt} = \frac{dE}{dq} \cdot\ \frac{dq}{dt} = \boxed{P = V \cdot\ I}
$$</p><p>Which means:
$$
E = \int_{-\infty}^t\ P\ dt
$$</p><p>Remember that power and energy is not the same in the physics world,
even if we may use them interchangeably in every-day terms.</p><h3 id=metrics>Metrics</h3><p>These are some of the metrics that we usually study in digital circuits</p><p>Average power:
$$
P_{avg} = \frac{\Delta E}{\Delta t}
$$</p><p>Peak power:
$$
P_{peak} = \max\left(\lim_{\Delta t \rightarrow 0}\ \frac{\Delta E}{\Delta T}\right) = \max\left(\frac{dE}{dt}\right)
$$</p><p>One of the most popular metrics is <strong>performance per watt</strong> (measures energy efficiency).</p></section></article><nav class=navigation><div class="nav-item previous"><a href=/school/eda322/eda322_6/ title="Previous: Part 6 - Reconfigurable Hardware">&larr; Previous</a></div><div class="nav-item next"><a href=/school/eda322/eda322_8/ title="Next: Part 8 - Interfaces and Memory">Next &rarr;</a></div></nav></main></div><footer id=site-footer><div class=social-links><a href=https://github.com/rezaarezvan title class=social-link><span class=bracket>[</span>github<span class=bracket>]</span></a>
<a href=https://x.com/rzvan__/ title class=social-link><span class=bracket>[</span>x<span class=bracket>]</span></a></div><div class=footer-marquee><div class=footer-marquee__content><span class=footer-marquee__item>memento mori • amor fati • sic parvis magna • per aspera ad astra</span>
<span class=footer-marquee__item>memento mori • amor fati • sic parvis magna • per aspera ad astra</span></div></div></footer></body></html>