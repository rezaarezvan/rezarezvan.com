<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/icon" href="/favicon.ico"><meta name="generator" content="Astro v5.5.5"><!-- Canonical URL --><link rel="canonical" href="https://rezvan.xyz/chalmers/ere103/ere103_8/"><!-- Primary Meta Tags --><title>Part 8 - Stability | control theory | rezarezvan.com</title><meta name="title" content="Part 8 - Stability | control theory | rezarezvan.com"><meta name="description"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://rezvan.xyz/chalmers/ere103/ere103_8/"><meta property="og:title" content="Part 8 - Stability | control theory | rezarezvan.com"><meta property="og:description"><meta property="og:image" content="https://rezvan.xyz/favicon.ico"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://rezvan.xyz/chalmers/ere103/ere103_8/"><meta property="twitter:title" content="Part 8 - Stability | control theory | rezarezvan.com"><meta property="twitter:description"><meta property="twitter:image" content="https://rezvan.xyz/favicon.ico"><!-- PageFind --><link href="/pagefind/pagefind-ui.css" rel="stylesheet"><script src="/pagefind/pagefind-ui.js"></script><!-- KaTeX support --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.15/dist/katex.min.css" integrity="sha384-Htz9HMhiwV8GuQ28Xr9pEs1B4qJiYu/nYLLwlDklR53QibDfmQzi7rYxXhMH/5/u" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.15/dist/katex.min.js" integrity="sha384-bxmi2jLGCvnsEqMuYLKE/KsVCxV3PqmKeK6Y6+lmNXBry6+luFkEOsmp5vD9I/7+" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.15/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><!-- inline KaTeX --><script>
    function renderKaTeX() {
        if (typeof renderMathInElement !== "undefined") {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false },
                ],
            });
        }
    }

    document.addEventListener("DOMContentLoaded", renderKaTeX);
    document.addEventListener("astro:after-swap", renderKaTeX);
</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CMTcOisY.js"></script><script>
    function init() {
        preloadTheme();
        onScroll();
        animate();
        updateThemeButtons();
        addCopyCodeButtons();
        setGiscusTheme();

        const backToTop = document.getElementById("back-to-top");
        backToTop?.addEventListener("click", (event) => scrollToTop(event));

        const backToPrev = document.getElementById("back-to-prev");
        backToPrev?.addEventListener("click", () => window.history.back());

        const lightThemeButton = document.getElementById("light-theme-button");
        lightThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "light");
            toggleTheme(false);
            updateThemeButtons();
        });

        const darkThemeButton = document.getElementById("dark-theme-button");
        darkThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "dark");
            toggleTheme(true);
            updateThemeButtons();
        });

        const systemThemeButton = document.getElementById(
            "system-theme-button",
        );
        systemThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "system");
            toggleTheme(
                window.matchMedia("(prefers-color-scheme: dark)").matches,
            );
            updateThemeButtons();
        });

        window
            .matchMedia("(prefers-color-scheme: dark)")
            .addEventListener("change", (event) => {
                if (localStorage.theme === "system") {
                    toggleTheme(event.matches);
                }
            });

        document.addEventListener("scroll", onScroll);
    }

    function updateThemeButtons() {
        const theme = localStorage.getItem("theme");
        const lightThemeButton = document.getElementById("light-theme-button");
        const darkThemeButton = document.getElementById("dark-theme-button");
        const systemThemeButton = document.getElementById(
            "system-theme-button",
        );

        function removeActiveButtonTheme(button) {
            button?.classList.remove("bg-black/5");
            button?.classList.remove("dark:bg-white/5");
        }

        function addActiveButtonTheme(button) {
            button?.classList.add("bg-black/5");
            button?.classList.add("dark:bg-white/5");
        }

        removeActiveButtonTheme(lightThemeButton);
        removeActiveButtonTheme(darkThemeButton);
        removeActiveButtonTheme(systemThemeButton);

        if (theme === "light") {
            addActiveButtonTheme(lightThemeButton);
        } else if (theme === "dark") {
            addActiveButtonTheme(darkThemeButton);
        } else {
            addActiveButtonTheme(systemThemeButton);
        }
    }

    function animate() {
        const animateElements = document.querySelectorAll(".animate");

        animateElements.forEach((element, index) => {
            setTimeout(() => {
                element.classList.add("show");
            }, index * 100);
        });
    }

    function onScroll() {
        if (window.scrollY > 0) {
            document.documentElement.classList.add("scrolled");
        } else {
            document.documentElement.classList.remove("scrolled");
        }
    }

    function scrollToTop(event) {
        event.preventDefault();
        window.scrollTo({
            top: 0,
            behavior: "smooth",
        });
    }

    function toggleTheme(dark) {
        const css = document.createElement("style");

        css.appendChild(
            document.createTextNode(
                `* {
             -webkit-transition: none !important;
             -moz-transition: none !important;
             -o-transition: none !important;
             -ms-transition: none !important;
             transition: none !important;
          }
        `,
            ),
        );

        document.head.appendChild(css);

        if (dark) {
            document.documentElement.classList.add("dark");
        } else {
            document.documentElement.classList.remove("dark");
        }

        window.getComputedStyle(css).opacity;
        document.head.removeChild(css);

        setGiscusTheme();
    }

    function preloadTheme() {
        const userTheme = localStorage.theme;

        if (userTheme === "light" || userTheme === "dark") {
            toggleTheme(userTheme === "dark");
        } else {
            toggleTheme(
                window.matchMedia("(prefers-color-scheme: dark)").matches,
            );
        }
    }

    function addCopyCodeButtons() {
        let copyButtonLabel = "ðŸ“‹";
        let codeBlocks = Array.from(document.querySelectorAll("pre"));

        async function copyCode(codeBlock, copyButton) {
            const codeText = codeBlock.innerText;
            const buttonText = copyButton.innerText;
            const textToCopy = codeText.replace(buttonText, "");

            await navigator.clipboard.writeText(textToCopy);
            copyButton.innerText = "âœ…";

            setTimeout(() => {
                copyButton.innerText = copyButtonLabel;
            }, 2000);
        }

        for (let codeBlock of codeBlocks) {
            const wrapper = document.createElement("div");
            wrapper.style.position = "relative";

            const copyButton = document.createElement("button");
            copyButton.innerText = copyButtonLabel;
            copyButton.classList = "copy-code";

            codeBlock.setAttribute("tabindex", "0");
            codeBlock.appendChild(copyButton);

            codeBlock.parentNode.insertBefore(wrapper, codeBlock);
            wrapper.appendChild(codeBlock);

            copyButton?.addEventListener("click", async () => {
                await copyCode(codeBlock, copyButton);
            });
        }
    }

    const setGiscusTheme = () => {
        const giscus = document.querySelector(".giscus-frame");

        const isDark = document.documentElement.classList.contains("dark");

        if (giscus) {
            const url = new URL(giscus.src);
            url.searchParams.set("theme", isDark ? "dark" : "light");
            giscus.src = url.toString();
        }
    };

    document.addEventListener("DOMContentLoaded", () => init());
    document.addEventListener("astro:after-swap", () => init());
    preloadTheme();
</script><link rel="stylesheet" href="/_astro/_subject_.WmXrNcmP.css">
<link rel="stylesheet" href="/_astro/index.C6eUsQXi.css">
<style>summary[data-astro-cid-xvrfupwn]{cursor:pointer;border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding:.375rem .75rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}summary[data-astro-cid-xvrfupwn]:hover{background-color:#0000000d}summary[data-astro-cid-xvrfupwn]:hover:is(.dark *){background-color:#ffffff0d}details[data-astro-cid-xvrfupwn][open] summary[data-astro-cid-xvrfupwn]{background-color:#0000000d}details[data-astro-cid-xvrfupwn][open] summary[data-astro-cid-xvrfupwn]:is(.dark *){background-color:#ffffff0d}
</style></head> <body> <header data-astro-transition-persist="astro-l7r54iwe-1"> <div class="mx-auto max-w-screen-sm px-3"> <div class="flex flex-wrap justify-between gap-y-4"> <div class="flex flex-col gap-y-2"> <a href="/" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out">  <div class="font-semibold"> rezarezvan.com </div>  </a> <div class="flex gap-x-2"> <button id="light-theme-button" aria-label="Light theme" class="group flex size-6 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> </button> <button id="dark-theme-button" aria-label="Dark theme" class="group flex size-6 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path> </svg> </button> <button id="system-theme-button" aria-label="System theme" class="group flex size-6 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect> <line x1="8" y1="21" x2="16" y2="21"></line> <line x1="12" y1="17" x2="12" y2="21"></line> </svg> </button> </div> </div> <nav class="flex items-center gap-1 text-sm"> <a href="/posts" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> posts </a> <span>/</span> <a href="/chalmers" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> chalmers </a> <span>/</span> <a href="/cityu" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> cityu </a> <span>/</span> <a href="/pdf/cv/cv.pdf" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> cv </a> <span>/</span> <button id="magnifying-glass" aria-label="Search" class="flex items-center rounded border border-black/15 bg-neutral-100 px-2 py-1 text-xs transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:bg-neutral-900 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16" style="color: currentcolor;"> <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 7C3.5 5.067 5.067 3.5 7 3.5C8.933 3.5 10.5 5.067 10.5 7C10.5 7.88461 10.1718 8.69256 9.63058 9.30876L9.30876 9.63058C8.69256 10.1718 7.88461 10.5 7 10.5C5.067 10.5 3.5 8.933 3.5 7ZM9.96544 11.0261C9.13578 11.6382 8.11014 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7C12 8.11014 11.6382 9.13578 11.0261 9.96544L14.0303 12.9697L14.5607 13.5L13.5 14.5607L12.9697 14.0303L9.96544 11.0261Z" fill="currentColor"></path> </svg>
&nbsp;Search
</button> </nav> </div> </div> </header> <main>  <div class="mx-auto max-w-screen-sm px-3"> <div class="animate grid gap-4"> <a href="/chalmers/ere103" class="not-prose group relative flex w-fit flex-nowrap rounded border border-black/15 py-1.5 pl-7 pr-3 transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-4 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-2 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="text-sm"> 
Back to control theory </div> </a> <div class="grid grid-cols-2 gap-1.5 sm:gap-3"> <a href="/chalmers/ere103/ere103_7" class="group relative flex flex-nowrap rounded-lg border border-black/15 px-4 py-3 pl-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 7 - Bode plot </div> </a> <a href="/chalmers/ere103/ere103_9" class="group relative flex flex-grow flex-row-reverse flex-nowrap rounded-lg border border-black/15 px-4 py-4 pr-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute right-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 19 12 12 19" class="-translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 9 - General controller structure </div> </a> </div> </div> <div class="my-10 space-y-1"> <div class="animate flex items-center gap-1.5"> <div class="font-base text-sm">ERE103</div>
&bull;
<div class="font-base text-sm"> <time datetime="2023-11-16T00:00:00.000Z"> November 16, 2023 </time> </div> 
&bull;
<div class="font-base text-sm">
Last modified:  <time datetime="2024-09-02T11:21:25.000Z"> September 02, 2024 </time> </div> 
&bull;
<div class="font-base text-sm">7 min read</div> </div> <h1 class="animate text-3xl font-semibold text-black dark:text-white"> Part 8 - Stability </h1> </div> <details open class="animate rounded-lg border border-black/15 dark:border-white/20" data-astro-cid-xvrfupwn> <summary data-astro-cid-xvrfupwn>Table of Contents</summary> <nav class="" data-astro-cid-xvrfupwn> <ul class="py-3" data-astro-cid-xvrfupwn> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#introduction" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Introduction </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#stability" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Stability </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#stability-for-feedback-systems" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Stability for feedback systems </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example-1" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#bode-plots-for-feedback-systems" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Bode plots for feedback systems </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example-2" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#routhhurwitz-stability-criterion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Routhâ€“Hurwitz stability criterion </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example-3" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#systems-with-non-rational-transfer-function" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Systems with non-rational transfer function </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#nyquists-simplified-criterion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Nyquists simplified criterion </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example-4" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#example-5" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Example </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#nyquist-criterion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Nyquist criterion </a>  </li> </ul> </nav> </details> <article class="animate"> <h3 id="introduction">Introduction</h3>
<p>In this part weâ€™ll properly define what stability is for different kind of systems.</p>
<h3 id="stability">Stability</h3>
<p>$G(s)$ is a stable system when:</p>
<p>$$
\lim_{t \to \infty} g(t) = 0
$$</p>
<p>Where $g(t)$ is the system impulse response, meaning $u(t) = \delta(t)$, which yields:</p>
<p>$$
g(t) = \mathcal{L}^{-1}\{G(s) = \dfrac{Y(s)}{U(s)} = Y(s) \}
$$</p>
<h3 id="example">Example</h3>
<p>$G(s) = \dfrac{1}{s^2 + 4s - 5}$</p>
<p>We can rewrite it as:
$$
G(s) = \dfrac{1}{s^2 + 4s - 5} = \dfrac{1}{(s - 1)(s + 5)}
$$</p>
<p>Using partial fraction decomposition:
$$
G(s) = \dfrac{A}{(s - 1)} + \dfrac{B}{(s + 5)}
$$</p>
<p>Taking the inverse Laplace transform yields:
$$
g(t) = A \cdot e^{t} + B \cdot e^{-5t}
$$</p>
<p>If we take:
$$
\lim_{t \to \infty} g(t) = \infty
$$</p>
<p>Since the first term explodes off to infinity.</p>
<p>This means that our condition in stability, can be defined as. The poles need to lie within the left-hand plane, meaning they have a real part that is negative.</p>
<p>But this is for simple systems, how does stability look like in a feedback system?</p>
<h3 id="stability-for-feedback-systems">Stability for feedback systems</h3>
<p>When dealing with feedback systems we need to look at the loop transfer function, $L(s) = F(s) G(s)$.</p>
<p>Remember that, the transfer function from $r(t)$ to $y(t)$ is:
$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p>
<p>We will call $1 + L(s)$ for the characteristic equation. From the last part we can say that $1 + L(s) = 0$</p>
<h3 id="example-1">Example</h3>
<p>Given the system:</p>
<p>$$
G(s) = \dfrac{1}{s^2 + s - 2}
$$</p>
<p>We use a P-controller:
$$
F(s) = K_p
$$</p>
<p>This means $L(s) = \dfrac{K_p}{s^2 + s - 2}$</p>
<p>$$
1 + L(s) = 0 \newline
1 + \dfrac{K_p}{s^2 + s -2} = 0 \newline
s^2 + s - 2 + K_p = 0 \newline
$$</p>
<p>This means:
$$
s_{1, 2} = -\dfrac{1}{2} \pm \sqrt{\dfrac{9}{4} - K_p}
$$</p>
<p>For our roots to not be positive, the square root term can at max be $\dfrac{1}{2}$. Meaning that:
$$
\dfrac{9}{4} - K_p &#x3C; \dfrac{1}{4}
$$</p>
<p>Which means:
$$
\boxed{K_p > 2}
$$</p>
<h3 id="bode-plots-for-feedback-systems">Bode plots for feedback systems</h3>
<p>Given:</p>
<p>$$
G_{ry}(s) = \dfrac{L(s)}{1 + L(s)}
$$</p>
<p>What happens if $L(s) = -1$?</p>
<p>This means that $|L(j\omega)| = 1$ and $arg(L(j\omega)) = -180^\circ$</p>
<p>Letâ€™s call those specific frequencies for $\omega_c$ and $\omega_\pi$. Weâ€™ll call them the crossover and phase crossover frequency respectievly.</p>
<p>Meaning that:
$$
|L(j\omega_c)| = 1 \newline
arg(L(j\omega_\pi)) = -180^\circ
$$</p>
<p>If $L(j\omega) = -1$, it is equivalent to $\omega_c = \omega_\pi$. If this happens, the system is unstable.</p>
<p>Therefore, we will introduce two new variables that will tell us how near instability we are.</p>
<p>Phase margin:
$$
\phi_m = arg(L(j\omega_c)) - -180^\circ = arg(L(j\omega_C)) + 180^\circ \ | \ \text{ given that } |L(j\omega_c)| = 1
$$</p>
<p>Amplitude margin:</p>
<p>$$
A_m = \dfrac{1}{|L(j\omega_\pi)|} \ | \ \text{ given that } arg(L(j\omega_\pi)) = -180^\circ
$$</p>
<h3 id="example-2">Example</h3>
<p>Given
$$
L(s) = \dfrac{K}{s(s + 1)^2} \ K > 0
$$</p>
<p>Given that $A_m = 2$, find $K$.</p>
<p>$$
2 = \dfrac{1}{|L(j\omega_\pi)|}
$$</p>
<p>This means that $|L(j\omega_\pi)| = \dfrac{1}{2}$</p>
<p>$$
L(j\omega) = \dfrac{K}{j\omega(j\omega + 1)^2}
$$</p>
<p>$$
arg(L(j\omega)) = 0 - 90^\circ - 2 \cdot arctan(\omega)
$$</p>
<p>Letâ€™s find $\omega_\pi$</p>
<p>$$
-90^\circ - 2 \cdot arctan(\omega_\pi) = -180^\circ \newline
-2 \cdot arctan(\omega_\pi) = -90^\circ \newline
arctan(\omega_\pi) = 45^\circ \newline
\omega_\pi = 1
$$</p>
<p>Therefore:
$$
|L(j\omega_\pi)| = \left| \dfrac{K}{j(1 + j)^2} \right| = \dfrac{1}{2}
$$</p>
<p>$$
\dfrac{K}{1 \cdot \left(\sqrt{1^2 + 1^2}\right)^2} = \dfrac{1}{2}
$$</p>
<p>$$
\dfrac{K}{2} = \dfrac{1}{2}
$$</p>
<p>$$
\boxed{K = 1}
$$</p>
<h3 id="routhhurwitz-stability-criterion">Routhâ€“Hurwitz stability criterion</h3>
<p>If we happen to get a polynomial of higher degrees than 2, then we need to find the poles still to determine stability. Solving a 3rd degree polynomial is not the most trivial task.</p>
<p>If we ever happen to get a polynomial of degree 4 than it is even worse. But if we reflect, we only want to know the sign of the poles, the actual values are useless if we want to just determine stability of a system.</p>
<p>Using this method we can easily find if a system is stable or not.</p>
<p>$1 + L(s)$ is a polynomial of degree higher than 2.
$$
1 + L(s) = a_0 s^n + a_1 s^{n - 1} + a_2 s^{n - 2} + \ldots + a_n
$$</p>
<p>To find the poles we set:
$$
a_0 s^n + a_1 s^{n - 1} + a_2 s^{n - 2} + \ldots + a_n = 0
$$</p>
<p>We write the following table:</p>








































<table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">$s^n$</td><td align="center">$a_0$</td><td align="center">$a_2$</td><td align="center">$a_4$</td><td align="center">$a_6$</td></tr><tr><td align="center">$s^{n - 1}$</td><td align="center">$a_1$</td><td align="center">$a_3$</td><td align="center">$a_5$</td><td align="center">$a_7$</td></tr><tr><td align="center">$s^{n - 2}$</td><td align="center">$c_0$</td><td align="center">$c_1$</td><td align="center">$c_2$</td><td align="center">$c_3$</td></tr><tr><td align="center">$s^{n - 3}$</td><td align="center">$d_0$</td><td align="center">$d_1$</td><td align="center">$d_2$</td><td align="center">$d_3$</td></tr></tbody></table>
<p>And so on</p>
<p>Weâ€™ll define these new characters as:
$$
c_0 = \dfrac{a_1 a_2 - a_0 a_3}{a_1} \newline
c_1 = \dfrac{a_1 a_4 - a_0 a_5}{a_1} \newline
c_2 = \dfrac{a_1 a_6 - a_0 a_7}{a_1} \newline
$$</p>
<p>$$
d_0 = \dfrac{c_0 a_3 - a_1 c_1}{c_0} \newline
d_1 = \dfrac{c_0 a_5 - a_1 c_2}{c_0} \newline
d_2 = \dfrac{c_0 a_7 - a_1 c_3}{c_0} \newline
$$</p>
<p>If the first column only contains positive numbers, then the system is stable!</p>
<h3 id="example-3">Example</h3>
<p>For what $K$ values is the system stable?
$$
L(s) = \dfrac{K}{s} \cdot \dfrac{3}{(s + 1)^2} = \dfrac{3K}{s(s^2 + 2s + 1)} = \dfrac{3K}{s^3 + 2s^2 + s}
$$</p>
<p>$$
1 + L(s) = 0\newline
1 + \dfrac{3K}{s^3 + 2s^2 + s} = 0 \newline
s^3 + 2s^2 + s + 3K = 0 \newline
$$</p>








































<table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">$s^3$</td><td align="center">$1$</td><td align="center">$1$</td><td align="center">$0$</td><td align="center">$0$</td></tr><tr><td align="center">$s^2$</td><td align="center">$2$</td><td align="center">$3k$</td><td align="center">$0$</td><td align="center">$0$</td></tr><tr><td align="center">$s^1$</td><td align="center">$c_0$</td><td align="center">$c_1$</td><td align="center">$c_2$</td><td align="center">$c_3$</td></tr><tr><td align="center">$s^0$</td><td align="center">$d_0$</td><td align="center">$d_1$</td><td align="center">$d_2$</td><td align="center">$d_3$</td></tr></tbody></table>
<p>$$
c_0 = \dfrac{a_1 a_2 - a_0 a_3}{a_1} = \dfrac{2 - 3K}{2} \newline
c_1 = \dfrac{a_1 a_4 - a_0 a_5}{a_1} = 0\newline
$$</p>
<p>$$
d_0 = \dfrac{c_0 a_3 - a_1 c_1}{c_0} = \dfrac{\dfrac{2 - 3K}{2} \cdot 3K}{\dfrac{2 - 3K}{2}} = 3K \newline
$$</p>
<p>It is stable if $c_0$ and $d_0 > 0$.
$$
\dfrac{2 - 3K}{2} > 0 \newline
3K > 0 \newline
$$</p>
<p>This means that:
$$
\boxed{0 &#x3C; K &#x3C; \dfrac{2}{3}}
$$</p>
<h3 id="systems-with-non-rational-transfer-function">Systems with non-rational transfer function</h3>
<p>In reality, we will deal with transfer function that may not always be rational functions, for example
$$
L(s) = e^{-3s}{s(s + 1)}
$$</p>
<p>This has a time delay, which makes it a non-rational function.</p>
<p>For these kinds we will use:</p>
<ul>
<li>Nyquists simplified criterion</li>
<li>Nyquists criterion</li>
</ul>
<h3 id="nyquists-simplified-criterion">Nyquists simplified criterion</h3>
<p>This is only applicable if $L(s)$ does not have any poles in the right-hand plane.</p>
<p>What you will do is that you plot $L(j\omega)$ for $0 \leq \omega \leq \infty$.</p>
<p>If the curve for $L(j\omega)$ passes through the negative real-axis with the point $(-1, 0)$ to the <strong>left</strong>, it is stable. If it is to the <strong>right</strong>, then it is unstable.</p>
<h3 id="example-4">Example</h3>
<p>$$
L(s) = \dfrac{e^{-s}}{s(1 + s)}
$$</p>
<p>Gives us the following plot:
<img src="/images/school/nyquist.png#center" alt=""></p>
<p>Which means this system is stable!</p>
<h3 id="example-5">Example</h3>
<p>Say we have the process, $G(s) = \dfrac{1}{(s + 1)(s + 2)}$. Say we have the controller, $F(s) = \dfrac{K}{s}$.</p>
<p>For what values on $K$ is the system stable?</p>
<p>$$
L(s) = \dfrac{K}{s(s + 1)(s + 2)}
$$</p>
<p>All poles lie in the left-hand plane, we can use the simplified criterion.</p>
<p>$$
L(j\omega) = \dfrac{K}{j\omega(j\omega + 1)(j\omega + 2)}
$$</p>
<p>Letâ€™s now split this fraction into the real and imaginary part. For this weâ€™ll need to multiply by the conjugates:
$$
L(j\omega) = \dfrac{K(1 - j\omega)(2 - j\omega)}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>Letâ€™s simplify:
$$
L(j\omega) = \dfrac{K(2 - 3j\omega -\omega^2)}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>$$
L(j\omega) = \dfrac{2K - 3Kj\omega - K\omega^2}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>$$
L(j\omega) = \dfrac{-3Kj\omega - K(2 - \omega^2)}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>$$
L(j\omega) = \dfrac{-3Kj\omega - K(2 - \omega^2)}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>$$
L(j\omega) = \dfrac{-3Kj\omega}{j\omega(1 + \omega^2)(2^2 + \omega^2)} - \dfrac{K(2 - \omega^2)}{j\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>$$
L(j\omega) = \dfrac{-3K}{(1 + \omega^2)(2^2 + \omega^2)} + j\dfrac{K(2 - \omega^2)}{\omega(1 + \omega^2)(2^2 + \omega^2)}
$$</p>
<p>When we cross the negative real-axis is equivalent to $\Im(L(j\omega)) = 0$</p>
<p>$$
\dfrac{K(2 - \omega^2)}{\omega(1 + \omega^2)(2^2 + \omega^2)} = 0 \newline
K(2 - \omega^2) = 0
$$</p>
<p>This means that when $\omega = \sqrt{2}$</p>
<p>This means that:
$$
\Re(L(j\sqrt{2})) = \dfrac{-3K}{1 + \sqrt{2})^2(4 + \sqrt{2})^2} = \ldots = -\dfrac{K}{6}
$$</p>
<p>We want this to the <strong>left</strong>, meaning:
$$
-\dfrac{K}{6} > -1 \newline
-K > -6 \newline
K &#x3C; 6 \newline
$$</p>
<p>Letâ€™s plot for different K values and see.</p>
<p>For $K = 2$:
<img src="/images/school/k2.png#center" alt=""></p>
<p>For $K = 6$:
<img src="/images/school/k6.png#center" alt=""></p>
<p>For $K = 12$:
<img src="/images/school/k12.png#center" alt=""></p>
<h3 id="nyquist-criterion">Nyquist criterion</h3>
<p>The proof and intution behind the Nyquist criterion is quite a lot and requires knowledge in complex analysis. We donâ€™t do that here.</p>
<p>Simply, if we have a system with poles in the right-hand plane, we will need to use the general Nyquist criterion.</p>
<p>What we will use is:
$$
Z = N + P
$$</p>
<p>Where:</p>
<p>$Z$ is the number of <strong>zeroes</strong> $1 + L(s)$ has in the right-hand plane.
$P$ is the number of <strong>poles</strong> $L(s)$ has in the right-hand plane.
$N$ is the number of turns $L(s)$ has around $(-1, 0)$ in the clockwise direction.</p>
<p>If:
$$
Z = N + P = 0
$$</p>
<p>Then the system is said to be stable.</p> <div class="mt-24"> <div class="grid grid-cols-2 gap-1.5 sm:gap-3"> <a href="/chalmers/ere103/ere103_7" class="group relative flex flex-nowrap rounded-lg border border-black/15 px-4 py-3 pl-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 7 - Bode plot </div> </a> <a href="/chalmers/ere103/ere103_9" class="group relative flex flex-grow flex-row-reverse flex-nowrap rounded-lg border border-black/15 px-4 py-4 pr-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute right-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 19 12 12 19" class="-translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 9 - General controller structure </div> </a> </div> </div> <div class="mt-24"> <div class="giscus"></div> <script data-astro-rerun src="https://giscus.app/client.js" data-repo="rezaarezvan/rezvan.xyz" data-repo-id="R_kgDOHvQr3w" data-category="General" data-category-id="DIC_kwDOHvQr384CiWVC" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async></script> </div> </article> </div>  </main> <footer class="animate"> <div class="mx-auto max-w-screen-sm px-3"> <div class="relative"> <div class="absolute -top-12 right-0"> <button id="back-to-top" class="group relative flex w-fit flex-nowrap rounded border border-black/15 py-1.5 pl-8 pr-3 transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-4 -translate-y-1/2 rotate-90 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-2 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="text-sm">Back to top</div> </button> </div> </div> <div class="flex items-center justify-between"> <div>&copy; 2025 â€¢ rezarezvan.com</div> <div class="flex flex-wrap items-center gap-1.5"></div> </div> </div> </footer> <aside data-pagefind-ignore> <div id="backdrop" class="bg-[rgba(0, 0, 0, 0.5] invisible fixed left-0 top-0 z-50 flex h-screen w-full justify-center p-6 backdrop-blur-sm" data-astro-transition-persist="astro-3snakcvo-2"> <div id="pagefind-container" class="m-0 flex h-fit max-h-[80%] w-full max-w-screen-sm flex-col overflow-auto rounded border border-black/15 bg-neutral-100 p-2 px-4 py-3 shadow-lg dark:border-white/20 dark:bg-neutral-900"> <div id="search" class="pagefind-ui pagefind-init" data-pagefind-ui data-bundle-path="/pagefind/" data-ui-options="{&#34;showImages&#34;:false,&#34;excerptLength&#34;:15,&#34;resetStyles&#34;:false}"></div> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.C4tRTXsn.js"></script> <div class="mr-2 pb-1 pt-4 text-right text-xs dark:prose-invert">
Press <span class="prose text-xs dark:prose-invert"><kbd class="">Esc</kbd></span> or click anywhere to close
</div> </div> </div> </aside> <script>
  const magnifyingGlass = document.getElementById("magnifying-glass");
  const backdrop = document.getElementById("backdrop");

  function openPagefind() {
    const searchDiv = document.getElementById("search");
    const search = searchDiv.querySelector("input");
    setTimeout(() => {
      search.focus();
    }, 0);
    backdrop?.classList.remove("invisible");
    backdrop?.classList.add("visible");
  }

  function closePagefind() {
    const search = document.getElementById("search");
    search.value = "";
    backdrop?.classList.remove("visible");
    backdrop?.classList.add("invisible");
  }

  // open pagefind
  magnifyingGlass?.addEventListener("click", () => {
    openPagefind();
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "/") {
      e.preventDefault();
      openPagefind();
    } else if ((e.metaKey || e.ctrlKey) && e.key === "k") {
      e.preventDefault();
      openPagefind();
    }
  });

  // close pagefind
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" || e.keyCode === 27) {
      closePagefind();
    }
  });

  // close pagefind when searched result(link) clicked
  document.addEventListener("click", (event) => {
    if (event.target.classList.contains("pagefind-ui__result-link")) {
      closePagefind();
    }
  });

  backdrop?.addEventListener("click", (event) => {
    if (!event.target.closest("#pagefind-container")) {
      closePagefind();
    }
  });

  // prevent form submission
  const form = document.getElementById("form");
  form?.addEventListener("submit", (event) => {
    event.preventDefault();
  });
</script>  </body></html>